language: cpp

compiler:
  - gcc
  - clang

branches:
  only:
    - master

os:
  - linux

script:
  - ./autogen.sh
  - ./configure --prefix=/usr --enable-tests=yes
  - make
  - sudo make install
  - ./src/test/tests
  - ./configure --enable-tests=yes --enable-example=yes
  - make clean && make
  - ./configure --enable-tests=yes
  - make clean && make
  - ./configure --enable-example=yes
  - make clean && make
  - ./configure --enable-lua=no
  - make clean && make
  - ./configure --enable-lua=no --enable-tests=yes
  - make clean && make
  - ./configure --enable-debug --enable-gprof
  - make clean && make
  - cd src/debug && qmake -qt=qt5 && make

before_install:
  - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq

install:
  - sudo apt-get install -qq g++-4.8
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 50
  - sudo apt-get install -qq qt5-default ccache

notifications:
  email: true

