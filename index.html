<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SimpleAI: SimpleAI documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SimpleAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SimpleAI documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="purpose"></a>
Purpose</h1>
<p>SimpleAI is a small and (hopefully) easy to use C++ library for behaviour tree based AI. It's main focus is about games - but of course it can be used for other things, too. The project is released under the MIT license and thus can be used for open source as well as commercial and closed source projects. If you use it, it would be nice to provide a link to the github page.</p>
<ul>
<li><a href="http://github.com/mgerhardy/simpleai/">GitHub page</a></li>
<li>Small example use case:<ul>
<li><a href="https://github.com/mgerhardy/engine/tree/master/src/modules/backend/entity/ai">https://github.com/mgerhardy/engine/tree/master/src/modules/backend/entity/ai</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="features"></a>
Features</h1>
<ul>
<li>Header only c++11</li>
<li>Threadsafe (hopefully, checked with hellgrind, tsan and other tools)</li>
<li>LUA and XML script interface to create the trees - but every other data source is possible, too. The LUA and XML script interfaces are just implemented as an <a href="https://github.com/mgerhardy/simpleai/blob/master/src/run/behaviours.lua">example</a> even though they are of course fully usable to create behaviour trees.</li>
<li><a class="el" href="group__Aggro.html">Aggro</a> list implementation</li>
<li>Several standard selectors and conditions (see below)</li>
<li>Group management</li>
<li>Movement implementations for steering</li>
<li>Network based remote <a class="el" href="index.html#debugging">Remote Debugging</a> with live editing of the behaviour tree</li>
<li>QT5 based remote debugger<ul>
<li>can also be used for other AI implementations. (E.g. there are java protocol classes)</li>
<li><a href="https://github.com/mgerhardy/simpleai/blob/master/contrib/exampledebugger">example</a> on how to extend the debugger to render application specific stuff into the map view.</li>
</ul>
</li>
<li><a class="el" href="group__Zone.html">Zone</a> support (each zone can be debugged separately)</li>
<li><a class="el" href="group__Filter.html">Filter</a> support</li>
</ul>
<p>As a default set of conditions, nodes and filters that SimpleAI already comes with:</p>
<ul>
<li>Conditions<ul>
<li><a class="el" href="classai_1_1And.html">And</a></li>
<li><a class="el" href="classai_1_1False.html">False</a></li>
<li><a class="el" href="classai_1_1Filter.html">Filter</a></li>
<li><a class="el" href="classai_1_1HasEnemies.html">HasEnemies</a></li>
<li><a class="el" href="classai_1_1IsCloseToGroup.html">IsCloseToGroup</a></li>
<li><a class="el" href="classai_1_1IsGroupLeader.html">IsGroupLeader</a></li>
<li><a class="el" href="classai_1_1IsInGroup.html">IsInGroup</a></li>
<li><a class="el" href="classai_1_1Not.html">Not</a></li>
<li><a class="el" href="classai_1_1Or.html">Or</a></li>
<li><a class="el" href="classai_1_1True.html">True</a></li>
</ul>
</li>
<li>Nodes<ul>
<li><a class="el" href="classai_1_1Fail.html">Fail</a></li>
<li><a class="el" href="classai_1_1Idle.html">Idle</a></li>
<li><a class="el" href="classai_1_1Invert.html">Invert</a></li>
<li><a class="el" href="classai_1_1Limit.html">Limit</a></li>
<li><a class="el" href="classai_1_1Parallel.html">Parallel</a></li>
<li><a class="el" href="classai_1_1PrioritySelector.html">PrioritySelector</a></li>
<li><a class="el" href="classai_1_1ProbabilitySelector.html">ProbabilitySelector</a></li>
<li><a class="el" href="classai_1_1RandomSelector.html">RandomSelector</a></li>
<li><a class="el" href="classai_1_1Sequence.html">Sequence</a></li>
<li><a class="el" href="classai_1_1Steer.html">Steer</a></li>
<li><a class="el" href="classai_1_1Succeed.html">Succeed</a></li>
</ul>
</li>
<li>Filter<ul>
<li><a class="el" href="classai_1_1Complement.html">Complement</a></li>
<li><a class="el" href="classai_1_1Difference.html">Difference</a></li>
<li><a class="el" href="classai_1_1First.html">First</a> - only put the first entry of a filter to the list</li>
<li><a class="el" href="classai_1_1Intersection.html">Intersection</a> - intersection between several filter results</li>
<li><a class="el" href="classai_1_1Last.html">Last</a> - only put the last entry of a filter to the list</li>
<li><a class="el" href="classai_1_1Random.html">Random</a> - only preserve n random entries of the sub filters</li>
<li><a class="el" href="classai_1_1SelectAll.html">SelectAll</a> - this filter is a nop - it will just use the already filtered entities</li>
<li><a class="el" href="classai_1_1SelectEmpty.html">SelectEmpty</a> - clears the selection</li>
<li><a class="el" href="classai_1_1SelectGroupLeader.html">SelectGroupLeader</a></li>
<li><a class="el" href="classai_1_1SelectGroupMembers.html">SelectGroupMembers</a> - select all the group members of a specified group</li>
<li><a class="el" href="classai_1_1SelectHighestAggro.html">SelectHighestAggro</a> - put the highest <a class="el" href="group__Aggro.html">Aggro</a> CharacterId into the selection</li>
<li><a class="el" href="classai_1_1SelectZone.html">SelectZone</a> - select all known entities in the zone</li>
<li><a class="el" href="classai_1_1Union.html">Union</a> - merges several other filter results</li>
</ul>
</li>
<li>Steering<ul>
<li><a class="el" href="classai_1_1movement_1_1GroupFlee.html">GroupFlee</a></li>
<li><a class="el" href="classai_1_1movement_1_1GroupSeek.html">GroupSeek</a></li>
<li><a class="el" href="classai_1_1movement_1_1SelectionFlee.html">SelectionFlee</a></li>
<li><a class="el" href="classai_1_1movement_1_1SelectionSeek.html">SelectionSeek</a></li>
<li><a class="el" href="classai_1_1movement_1_1TargetFlee.html">TargetFlee</a></li>
<li><a class="el" href="classai_1_1movement_1_1TargetSeek.html">TargetSeek</a></li>
<li><a class="el" href="classai_1_1movement_1_1Wander.html">Wander</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="compilation"></a>
Compile the lib:</h1>
<ul>
<li>autotools based compilation<ul>
<li><code>./autogen.sh</code></li>
<li><code>./configure</code></li>
<li><code>make</code></li>
<li><code>make install</code></li>
</ul>
</li>
<li>cmake based compilation (enable tests, remote debugger and so on via options)<ul>
<li><code>cmake CMakeLists.txt</code></li>
<li><code>make</code></li>
</ul>
</li>
<li>Compile the remote debugger<ul>
<li>qmake<ul>
<li><code>cd src/debug</code></li>
<li><code>qmake</code></li>
<li><code>make</code></li>
</ul>
</li>
<li>cmake based compilation<ul>
<li><code>cmake CMakeLists.txt -DSIMPLEAI_DEBUGGER=ON</code></li>
<li><code>make</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="run"></a>
Running it:</h1>
<p>SimpleAI comes with a small tool that is located in src/run. You can execute your own trees with:</p>
<ul>
<li><code>./simpleai-run -file src/run/behaviours.lua</code></li>
</ul>
<p>After you ran it, you can connect with the remote debugger and inspect the live state of every spawned AI entity.</p>
<h1><a class="anchor" id="using"></a>
Using it:</h1>
<ul>
<li>Make sure your character extends <a class="el" href="classai_1_1ICharacter.html">ICharacter</a> or includes it as component.</li>
<li>Implement your behaviour tree loader by extending the class ITreeloader.</li>
<li>Extend the AIDebugger to deliver your own MapView that renders the map of your application.</li>
<li>Add your own condition, filter and task factories to the <a class="el" href="classai_1_1AIRegistry.html">AIRegistry</a> or via <a class="el" href="classai_1_1LUAAIRegistry.html">LUAAIRegistry</a>.</li>
<li>Assign attributes to your characters that should be shown in the debuggers live view.</li>
</ul>
<p>As the name states, it should be easy to use and to integrate into your application. You have the ability to create new customized actions, override existing ones with your own implementations and so on.</p>
<p>To integrate the AI into your application, your entity class should implement or include the <a class="el" href="classai_1_1ICharacter.html">ICharacter</a> interface. You only have to call the <a class="el" href="classai_1_1ICharacter.html#aeb7d0c33745a9444cdf5604f14254c3c">ICharacter::update()</a> method to get the AI and the character updated. You can view the included <code>simpleai-run</code> tool for getting an idea on how to do this.</p>
<p>Once this step is done, you can go on with creating new actions for your application. All you have to do for this is to extend <a class="el" href="classai_1_1ITask.html">ITask</a>. The entity instance given to the <a class="el" href="classai_1_1ITask.html#aa5d29aca24485d8a55432805dc26121c">ITask::doAction()</a> method contains the <a class="el" href="classai_1_1ICharacter.html">ICharacter</a> that you bound to your application entity.</p>
<p>After implementing these actions, all you have to do in order to use them with e.g. the existing <a class="el" href="classai_1_1LUATreeLoader.html">LUATreeLoader</a> is to add them to the registry. Just call <a class="el" href="classai_1_1AIRegistry.html#aa91c90830efcaf5306fc287c6f2898a7">AIRegistry::registerNodeFactory()</a> on your <a class="el" href="classai_1_1AIRegistry.html">AIRegistry</a> instance and you are ready to write LUA scripts with it. Again, as a reference, just check out the example code. You can also create nodes, conditions, filter and steering methods via LUA directly. See <a class="el" href="classai_1_1LUAAIRegistry.html">LUAAIRegistry</a> for more information about this.</p>
<p>Note the usage of a few macros that makes your life easier:</p>
<ul>
<li><a class="el" href="ITask_8h.html#a9aa046e682385fef3305111c5b555966">TASK_CLASS</a></li>
<li><a class="el" href="TreeNode_8h.html#aafb7648de47362ff1c6d6922b266bd88">NODE_FACTORY</a></li>
<li><a class="el" href="ICondition_8h.html#a52a75a637987f9804e2c814c4e4dd398">CONDITION_CLASS</a></li>
<li><a class="el" href="ICondition_8h.html#a8421b2a7870a3f33182c9780b7a35ac2">CONDITION_FACTORY</a></li>
</ul>
<p>Now you only have to do: </p>
<div class="fragment"><div class="line"><a class="code" href="classai_1_1AIRegistry.html">ai::AIRegistry</a> registry;</div>
<div class="line">registry.<a class="code" href="classai_1_1AIRegistry.html#aa91c90830efcaf5306fc287c6f2898a7">registerNodeFactory</a>(<span class="stringliteral">&quot;ExampleTask&quot;</span>, ai::example::ExampleTask::FACTORY);</div>
<div class="line"></div>
<div class="line"><a class="code" href="classai_1_1LUATreeLoader.html">ai::LUATreeLoader</a> loader(registry);</div>
<div class="line">loader.init(allMyLuaBehaviourTreesInThisString);</div>
<div class="line"><span class="keyword">const</span> ai::TreeNodePtr&amp; root = loader.load(<span class="stringliteral">&quot;BehaviourNameEgDefensiveBehaviour&quot;</span>);</div>
</div><!-- fragment --><p>The root node created by the load method should be given to your <a class="el" href="classai_1_1ICharacter.html">ICharacter</a> implementation which holds an instance of the AI class. Each SimpleAI controlled entity in your world will have one of them.</p>
<h1><a class="anchor" id="debugging"></a>
Remote Debugging</h1>
<div class="image">
<img src="aidebugger.png" alt="aidebugger.png"/>
</div>
<p>The remote debugger can also render your custom map widget which allows you to show the characters in their "natural" environment instead of on a boring plane. You can choose which entities should be available for remote debugging. The included <code>Server</code> class handles the serialization of the entities. You can create one instance of a server per application map you have. Once you add an entity to the server, it gets automatically serialized and is broadcasted to all connected clients. If no client is connected, nothing is serialized and thus the remote debugging has almost no performance influence.</p>
<p>The remote debugging can only be active for one <code>Zone</code>. So every other zone is also not affected by the debugging overhead. Usually you would split a zone by logical units, like one map is one zone. But you can also split them up into logical units like boss ai, supporter ai, ... and so on.</p>
<p>Features so far:</p>
<ul>
<li>Render the behaviour tree (either in a table, or as a node tree)</li>
<li>Show the <a class="el" href="group__Aggro.html">Aggro</a> state</li>
<li>Show the attributes that are assigned to an entity (<a class="el" href="classai_1_1ICharacter.html#a043926e1f73b90f846179b9a24217100" title="Set an attribute that can be used for debugging. ">ai::ICharacter::setAttribute()</a>)</li>
<li>Pause execution of a zone</li>
<li>Single step in a <a class="el" href="group__Zone.html">Zone</a> (after it was paused)</li>
<li>Reset states of the AI in a <a class="el" href="group__Zone.html">Zone</a></li>
<li>Live editing of the behaviour tree (update, add, remove)</li>
</ul>
<p>Examples on how to customize the debugger</p>
<ul>
<li><a href="https://github.com/mgerhardy/simpleai/blob/master/contrib/exampledebugger">some classes</a> that provide a custom map view and map item rendering with custom data from attributes.</li>
</ul>
<h1><a class="anchor" id="legal"></a>
Legal</h1>
<p>Copyright (C) 2015 Martin Gerhardy <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ti'+'n.g'+'er'+'har'+'dy'+'@gm'+'ai'+'l.c'+'om'; return false;">marti<span style="display: none;">.nosp@m.</span>n.ge<span style="display: none;">.nosp@m.</span>rhard<span style="display: none;">.nosp@m.</span>y@gm<span style="display: none;">.nosp@m.</span>ail.c<span style="display: none;">.nosp@m.</span>om</a></p>
<p>This software is provided 'as-is', without any express or implied warranty. In no event will the authors be held liable for any damages arising from the use of this software.</p>
<p>Permission is granted to anyone to use this software for any purpose, including commercial applications, and to alter it and redistribute it freely, subject to the following restrictions:</p>
<ol type="1">
<li>The origin of this software must not be misrepresented; you must not claim that you wrote the original software. If you use this software in a product, an acknowledgment in the product documentation would be appreciated but is not required.</li>
<li>Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software.</li>
<li>This notice may not be removed or altered from any source distribution. </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
